require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/order_list/index"],{"0db4":function(t,e,s){"use strict";s.r(e);var n=s("5dae"),a=s("c931");for(var i in a)"default"!==i&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("761d");var u,_=s("f0c5"),p=Object(_["a"])(a["default"],n["b"],n["c"],!1,null,"67725329",null,!1,n["a"],u);e["default"]=p.exports},"5dae":function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return i})),s.d(e,"a",(function(){return n}));var n={easyLoadimage:function(){return Promise.all([s.e("common/vendor"),s.e("components/easy-loadimage/easy-loadimage")]).then(s.bind(null,"9362"))}},a=function(){var t=this,e=t.$createElement,s=(t._self._c,t.$t("订单信息")),n=t.$t("消费订单"),a=t.$t("总消费"),i=t.$t("￥"),u=t.$t("全部"),_=t.$t("待付款"),p=t.$t("待发货"),o=t.$t("待收货"),r=t.$t("待评价"),l=t.$t("共"),y=t.$t("件商品，总金额"),d=t.$t("￥"),c=t.$t("查看详情"),h=t.__map(t.orderList,(function(e,s){var n=t.__get_orig(e),a=2==e.type?t.$t("砍价"):null,i=2!=e.type&&3==e.type?t.$t("拼团"):null,u=2!=e.type&&3!=e.type&&1==e.type?t.$t("秒杀"):null,_=2!=e.type&&3!=e.type&&1!=e.type&&4==e.type?t.$t("预售"):null,p=9==e._status._type?t.$t("线下付款,未支付"):null,o=9!=e._status._type&&0==e._status._type?t.$t("待付款"):null,r=9!=e._status._type&&0!=e._status._type&&1==e._status._type&&1==e.shipping_type?t.$t("待发货"):null,l=9!=e._status._type&&0!=e._status._type&&1==e._status._type&&1==e.shipping_type&&e.refund.length&&e.is_all_refund?t.$t("退款中"):null,y=9!=e._status._type&&0!=e._status._type&&1==e._status._type&&1==e.shipping_type&&e.refund.length&&!e.is_all_refund?t.$t("部分退款中"):null,d=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1!=e._status._type||2!=e.shipping_type?null:t.$t("待核销"),c=9!=e._status._type&&0!=e._status._type&&(1!=e._status._type||1!=e.shipping_type)&&1==e._status._type&&2==e.shipping_type&&e.refund.length&&e.is_all_refund?t.$t("退款中"):null,h=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1!=e._status._type||2!=e.shipping_type||!e.refund.length||e.is_all_refund?null:t.$t("部分退款中"),f=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2!=e._status._type?null:t.$t("待收货"),g=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2!=e._status._type||!e.refund.length||!e.is_all_refund?null:t.$t("退款中"),m=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2!=e._status._type||!e.refund.length||e.is_all_refund?null:t.$t("部分退款中"),$=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3!=e._status._type?null:t.$t("待评价"),v=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3!=e._status._type||!e.refund.length||!e.is_all_refund?null:t.$t("退款中"),L=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3!=e._status._type||!e.refund.length||e.is_all_refund?null:t.$t("部分退款中"),b=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4!=e._status._type?null:t.$t("已完成"),O=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4!=e._status._type||!e.refund.length||!e.is_all_refund?null:t.$t("退款中"),S=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4!=e._status._type||!e.refund.length||e.is_all_refund?null:t.$t("部分退款中"),w=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4==e._status._type||5!=e._status._type||0!=e.status?null:t.$t("未核销"),x=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4==e._status._type||5!=e._status._type||0!=e.status||!e.refund.length||!e.is_all_refund?null:t.$t("退款中"),I=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4==e._status._type||5!=e._status._type||0!=e.status||!e.refund.length||e.is_all_refund?null:t.$t("部分退款中"),D=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4==e._status._type||5==e._status._type&&0==e.status||-2!=e._status._type?null:t.$t("已退款"),P=t.__map(e.cartInfo,(function(s,n){var a=t.__get_orig(s),i=s.productInfo.attrInfo?t.$t("￥"):null,u=s.productInfo.attrInfo?null:t.$t("￥"),_=s.refund_num&&-2!=e._status._type?t.$t("件退款中"):null;return{$orig:a,m34:i,m35:u,m36:_}})),T=0==e._status._type||9==e._status._type?t.$t("取消订单"):null,M=0==e._status._type?t.$t("立即付款"):null,z=4==e._status._type?t.$t("删除订单"):null;return{$orig:n,m9:a,m10:i,m11:u,m12:_,m13:p,m14:o,m15:r,m16:l,m17:y,m18:d,m19:c,m20:h,m21:f,m22:g,m23:m,m24:$,m25:v,m26:L,m27:b,m28:O,m29:S,m30:w,m31:x,m32:I,m33:D,l0:P,m40:T,m41:M,m42:z}})),f=0!=t.orderList.length||t.loading?null:t.$t("暂无订单");t.$mp.data=Object.assign({},{$root:{m0:s,m1:n,m2:a,m3:i,m4:u,m5:_,m6:p,m7:o,m8:r,m37:l,m38:y,m39:d,m43:c,l1:h,m44:f}})},i=[]},6052:function(t,e,s){},"761d":function(t,e,s){"use strict";var n=s("6052"),a=s.n(n);a.a},"97ce":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s("451d"),a=s("8ba8"),i=s("f984"),u=s("666f"),_=s("26cb"),p=o(s("66ca"));function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){Promise.all([s.e("common/vendor"),s.e("components/home/index")]).then(function(){return resolve(s("03ff"))}.bind(null,s)).catch(s.oe)},l=function(){Promise.all([s.e("common/vendor"),s.e("components/payment/index")]).then(function(){return resolve(s("b647"))}.bind(null,s)).catch(s.oe)},y=function(){s.e("components/Authorize").then(function(){return resolve(s("b29f"))}.bind(null,s)).catch(s.oe)},d=function(){s.e("components/emptyPage").then(function(){return resolve(s("2baa"))}.bind(null,s)).catch(s.oe)},c={components:{payment:l,home:r,emptyPage:d,authorize:y},mixins:[p.default],data:function(){return{loading:!1,loadend:!1,loadTitle:this.$t("加载更多"),orderList:[],orderData:{},orderStatus:9,page:1,limit:20,payMode:[{name:this.$t("微信支付"),icon:"icon-weixinzhifu",value:"weixin",title:this.$t("使用微信快捷支付"),payStatus:!0},{name:this.$t("支付宝支付"),icon:"icon-zhifubao",value:"alipay",title:this.$t("使用支付宝支付"),payStatus:!0},{name:this.$t("余额支付"),icon:"icon-yuezhifu",value:"yue",title:this.$t("可用余额"),number:0,payStatus:!0},{name:this.$t("好友代付"),icon:"icon-haoyoudaizhifu",value:"friend",title:this.$t("找微信好友支付"),payStatus:1}],pay_close:!1,pay_order_id:"",totalPrice:"0",initIn:!1,isAuto:!1,isShowAuth:!1}},computed:(0,_.mapGetters)(["isLogin"]),onShow:function(){this.isLogin?(this.page=1,this.orderList=[],this.loadend=!1,this.pay_close=!1,this.onLoadFun(),this.getOrderList()):(0,u.toLogin)();var t=wx.getEnterOptionsSync();if("1038"==t.scene&&"wxef277996acc166c3"==t.referrerInfo.appId&&this.initIn){var e=t.referrerInfo.extraData;this.initIn=!1,e?"success"==e.code?this.getOrderList():e.code:this.getOrderList()}},methods:{onLoadFun:function(){this.getOrderData(),this.getUserInfo()},authColse:function(t){this.isShowAuth=t},onChangeFun:function(t){var e=t,s=e.action||null,n=void 0!=e.value?e.value:null;s&&this[s]&&this[s](n)},getUserInfo:function(){var t=this;(0,a.getUserInfo)().then((function(e){t.payMode[2].number=e.data.now_money,t.$set(t,"payMode",t.payMode)}))},payClose:function(){this.pay_close=!1},onLoad:function(t){t.status&&(this.orderStatus=t.status)},getOrderData:function(){var t=this,e=this;(0,n.orderData)().then((function(s){e.$set(e,"orderData",s.data),e.payMode.map((function(t){"weixin"==t.value&&(t.payStatus=!!s.data.pay_weixin_open),"alipay"==t.value&&(t.payStatus=!!s.data.ali_pay_status),"yue"==t.value&&(t.payStatus=1==s.data.yue_pay_status),"friend"==t.value&&(t.payStatus=1==s.data.friend_pay_status)})),t.payMode[1].payStatus=!1}))},cancelOrder:function(t,e){var s=this;if(!e)return s.$util.Tips({title:s.$t("缺少订单号无法取消订单")});(0,n.orderCancel)(e).then((function(e){return s.$util.Tips({title:e.msg,icon:"success"},(function(){s.orderList.splice(t,1),s.$set(s,"orderList",s.orderList),s.$set(s.orderData,"unpaid_count",s.orderData.unpaid_count-1),s.getOrderData()}))})).catch((function(t){return s.$util.Tips({title:t})}))},goPay:function(e,s){t.navigateTo({url:"/pages/goods/cashier/index?order_id=".concat(s,"&from_type=order")})},pay_complete:function(){this.loadend=!1,this.page=1,this.$set(this,"orderList",[]),this.pay_close=!1,t.navigateTo({url:"/pages/goods/order_pay_status/index?order_id="+this.pay_order_id+"&msg="+this.$t("支付成功")+"&type=3&totalPrice="+this.totalPrice}),this.pay_order_id="",this.getOrderData(),this.getOrderList()},pay_fail:function(){this.pay_close=!1,this.pay_order_id=""},goOrderDetails:function(e){var s=this;if(!e)return s.$util.Tips({title:s.$t("缺少订单号无法查看订单详情")});t.showLoading({title:s.$t("正在加载中")}),(0,i.openOrderSubscribe)().then((function(){t.hideLoading(),t.navigateTo({url:"/pages/goods/order_details/index?order_id="+e})})).catch((function(e){t.hideLoading()}))},statusClick:function(t){t!=this.orderStatus&&(this.orderStatus=t,this.loadend=!1,this.page=1,this.$set(this,"orderList",[]),this.getOrderList())},getOrderList:function(){var t=this;t.loadend||t.loading||(t.loading=!0,t.loadTitle=t.$t("加载更多"),(0,n.getOrderList)({type:t.orderStatus,page:t.page,limit:t.limit}).then((function(e){var s=e.data||[],n=s.length<t.limit;t.orderList=t.$util.SplitArray(s,t.orderList),t.$set(t,"orderList",t.orderList),t.loadend=n,t.loading=!1,t.loadTitle=n?t.$t("没有更多内容啦~"):t.$t("加载更多"),t.page=t.page+1})).catch((function(e){t.loading=!1,t.loadTitle=t.$t("加载更多")})))},delOrder:function(e,s){var a=this;t.showModal({title:a.$t("删除订单"),content:a.$t("确定删除该订单"),success:function(t){if(t.confirm)(0,n.orderDel)(e).then((function(t){return a.orderList.splice(s,1),a.$set(a,"orderList",a.orderList),a.$set(a.orderData,"unpaid_count",a.orderData.unpaid_count-1),a.getOrderData(),a.$util.Tips({title:a.$t("删除成功"),icon:"success"})})).catch((function(t){return a.$util.Tips({title:t})}));else if(t.cancel)return a.$util.Tips({title:a.$t("已取消")})}})}},onReachBottom:function(){this.getOrderList()},onPageScroll:function(e){t.$emit("scroll")}};e.default=c}).call(this,s("543d")["default"])},c931:function(t,e,s){"use strict";s.r(e);var n=s("97ce"),a=s.n(n);for(var i in n)"default"!==i&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},f91a:function(t,e,s){"use strict";(function(t){s("248d");n(s("66fd"));var e=n(s("0db4"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=s,t(e.default)}).call(this,s("543d")["createPage"])}},[["f91a","common/runtime","common/vendor"]]]);